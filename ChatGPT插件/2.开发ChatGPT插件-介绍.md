学习如何构建一个插件，允许ChatGPT调用您的应用程序。

## 介绍

OpenAI插件将ChatGPT与第三方应用程序连接起来。这些插件使ChatGPT能够与开发者定义的API进行交互，增强ChatGPT的功能，并使其能够执行各种操作。

插件可以使ChatGPT能够做以下事情： 获取实时信息，例如体育比分、股票价格、最新新闻等。 获取知识库信息，例如公司文档、个人笔记等。 代表用户执行操作，例如预订航班、订购食物等。

> 插件目前处于有限的Alpha测试阶段，您可能尚无法使用。请加入[等待列表](https://openai.com/waitlist/plugins)以获取访问权限。在Alpha测试期间，OpenAI将与用户和开发者密切合作，对插件系统进行迭代改进，可能会有重大变化。

如果您希望在阅读文档并学习更多有关插件的信息时有一个示例正在运行，您可以从OpenAI的插件[快速入门仓库](https://github.com/openai/plugins-quickstart)开始。

插件开发人员公开一个或多个API端点，并附带一个标准化的清单文件和一个OpenAPI规范。这些定义了插件的功能，允许ChatGPT消费文件并调用开发人员定义的API。

AI模型充当智能API调用者。给定API规范和关于何时使用API的自然语言描述，模型主动调用API执行操作。

例如，如果用户问：“在巴黎住几晚上应该住哪里？”，模型可能会选择调用酒店预订插件API，接收API响应，并生成一个用户界面答案，结合API数据和其自然语言能力。

随着时间的推移，OpenAI预计该系统将发展以适应更高级的用例。

### 插件流程

要构建一个插件，了解端到端的流程非常重要。

1.创建一个清单文件，并将其托管在yourdomain.com/.well-known/ai-plugin.json

- 该文件包含有关插件的元数据（名称、标志等）、有关所需身份验证的详细信息（身份验证类型、OAuth URL等）以及您想要公开的端点的OpenAPI规范。
- 模型将看到OpenAPI描述字段，可用于为不同字段提供自然语言描述。
- OpenAI建议一开始只公开1-2个端点，并且参数数量尽量少，以减少文本长度。插件描述、API请求和API响应都将插入到与ChatGPT的对话中。这会占用模型的上下文限制。

2.在[ChatGPT UI](https://chat.openai.com/)中注册您的插件

从顶部下拉菜单中选择插件模型，然后选择“插件”、“插件商店”，最后选择“安装未经验证的插件”或“开发自己的插件”。 如果需要身份验证，提供OAuth 2的client_id和client_secret或API密钥。

3.用户激活您的插件

- 用户必须在ChatGPT UI中手动激活您的插件。（ChatGPT默认情况下不使用您的插件。）
- 在alpha测试期间，插件开发人员将能够与15个其他用户共享其插件（目前只有其他开发人员可以安装未经验证的插件）。随着时间的推移，OpenAI将推出一种提交插件进行审核，以暴露给ChatGPT所有用户的方法。
- 如果需要身份验证，用户将通过OAuth被重定向到您的插件；您还可以选择在此处创建新帐户。
- 在未来，OpenAI希望构建一些功能，帮助用户发现有用且受欢迎的插件。

3.用户开始对话

- OpenAI将在发送给ChatGPT的消息中注入有关您插件的简要描述，对最终用户不可见。这将包括插件描述、端点和示例。
- 当用户提出相关问题时，如果适用，模型可能会选择从您的插件调用API；对于POST请求，OpenAI要求开发人员构建用户确认流程。
- 模型将在其向用户的响应中整合API结果。
- 模型可能会在其响应中包含从API调用返回的链接。这些将显示为富预览（使用OpenGraph协议，OpenAI提取site_name、title、description、image和url字段）。
- 模型还可以输出markdown（例如来自您的API的图像URL），ChatGPT UI将在UI中呈现markdown。

当前，OpenAI将在插件对话头中发送用户的国家和州信息（例如，如果您在加利福尼亚州，它将显示为{"openai-subdivision-1-iso-code": "US-CA"}）。对于更多的数据源，用户需要通过同意屏幕选择加入。这对于购物、餐厅、天气等方面非常有用。您可以在OpenAI的开发者使用条款中阅读更多信息。